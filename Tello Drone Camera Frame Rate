import cv2
import mediapipe as mp
import tellopy

 


def main():
    # Connect to the Tello drone
    drone = tellopy.Tello()
    drone.connect()

 

    # Set the camera frame rate to 10 fps
    drone.set_video_fps(10)

 

    # Start the video stream
    drone.start_video()

 

    # Initialize the hand tracking pipeline
    mp_drawing = mp.solutions.drawing_utils
    mp_hands = mp.solutions.hands
    hands = mp_hands.Hands(
        min_detection_confidence=0.5, min_tracking_confidence=0.5)

 

    # Main loop
    while True:
        # Capture a frame from the Tello camera
        frame = drone.get_frame_read().frame

 

        # Convert the frame to RGB and run it through the hand tracking pipeline
        frame = cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)
        results = hands.process(frame)

 

        # Draw the hand landmarks on the frame
        if results.multi_hand_landmarks:
            for hand_landmarks in results.multi_hand_landmarks:
                mp_drawing.draw_landmarks(
                    frame, hand_landmarks, mp_hands.HAND_CONNECTIONS)

 

                # Check for thumbs up and thumbs down gestures
                thumb_tip = hand_landmarks.landmark[mp_hands.HandLandmark.THUMB_TIP]
                thumb_up = thumb_tip.y < hand_landmarks.landmark[mp_hands.HandLandmark.INDEX_FINGER_TIP].y
                thumb_down = thumb_tip.y > hand_landmarks.landmark[mp_hands.HandLandmark.INDEX_FINGER_TIP].y

 

                # Take off or land the drone based on hand gestures
                if thumb_up:
                    drone.takeoff()
                elif thumb_down:
                    drone.land()

 

        # Show the frame on the screen
        cv2.imshow('Tello Stream', frame)
        if cv2.waitKey(1) == ord('q'):
            break

 

    # Clean up
    hands.close()
    drone.land()
    drone.quit()
    cv2.destroyAllWindows()

 


if __name__ == '__main__':
    main()


has context menu
